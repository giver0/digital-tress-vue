(function(){"use strict";var e={4775:function(e,l,t){var o=t(9242),n=t(3396);function i(e,l,t,o,i,s){const r=(0,n.up)("fieldBox");return(0,n.wg)(),(0,n.j4)(r)}var s=t(7139),r=t(5860);const a={class:"digital-tree__layout"},c={class:"digital-tree__main-layer"},d={key:0,class:"tree-info"},u={class:"tree-info__item"},h={class:"tree-info__item"},g={class:"tree-info__item"},f={class:"tree-info__item"},C={class:"tree-info__item"},p={class:"tree-info__item"},y={class:"tree-info__item"},v={class:"tree-info__item"},_={class:"tree-info__item"},m={class:"tree-info__item"},w={class:"tree-info__item"},x={class:"digital-tree__control"},b={class:"digital-tree__counter"},T={class:"digital-tree__counter-box"},A=(0,n._)("div",{class:"digital-tree__counter-text"}," Delay (ms) ",-1),F={class:"digital-tree__counter-box"},I=(0,n._)("div",{class:"digital-tree__counter-text"}," Tree count ",-1),k={class:"digital-tree__counter-box"},j=(0,n._)("div",{class:"digital-tree__counter-text"}," Column ",-1),E={class:"digital-tree__counter-box"},D=(0,n._)("div",{class:"digital-tree__counter-text"}," Raw ",-1),H={id:"counter-trees-cell",class:"digital-tree__counter-trees-cell-boxs"};function R(e,l,t,i,R,G){const P=(0,n.up)("CellHeader"),z=(0,n.up)("CellsField"),O=(0,n.up)("ControlButton"),B=(0,n.up)("CycleCounter"),S=(0,n.up)("CellCounter");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(P),(0,n._)("div",a,[(0,n._)("div",c,[(0,n.Wm)(z,{"field-cells":e.fieldCells,"choosen-tree-id":e.displayCell?.parentTree?.id,onClicked:e.displayCellParam},null,8,["field-cells","choosen-tree-id","onClicked"]),e.displayCell.parentTree?.id?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",u," type - "+(0,s.zw)(e.displayCell.type),1),(0,n._)("div",h," i - "+(0,s.zw)(e.displayCell.i),1),(0,n._)("div",g," j - "+(0,s.zw)(e.displayCell.j),1),(0,n._)("div",f," id - "+(0,s.zw)(e.displayCell.id),1),(0,n._)("div",C," color - "+(0,s.zw)(e.displayCell.color),1),(0,n._)("div",p," isCellFalling - "+(0,s.zw)(e.displayCell.isCellFalling),1),(0,n._)("div",y," parentTree - "+(0,s.zw)(e.displayCell.parentTree?.id),1),(0,n._)("div",v," tree energy - "+(0,s.zw)(e.displayCell.parentTree?.energy),1),(0,n._)("div",_," tree cells - "+(0,s.zw)(e.displayCell.parentTree?.cells.length),1),(0,n._)("div",m," isFreeCellsAround - "+(0,s.zw)(e.displayCell.parentTree?.isFreeCellsAround),1),(0,n._)("div",w,(0,s.zw)(e.displayCell.parentTree?.genome),1)])):(0,n.kq)("",!0)]),(0,n._)("div",x,[(0,n.Wm)(O,{"is-game-paused":e.isGamePaused,"is-can-change-color":e.isCanChangeColor,onOnPauseGame:e.pauseGame,onOnChangeColor:e.ChangeColor},null,8,["is-game-paused","is-can-change-color","onOnPauseGame","onOnChangeColor"]),(0,n._)("div",b,[(0,n.Wm)(B,{"cycle-counter":e.cycleCounter,"full-cycle-counter":e.fullCycleCounter},null,8,["cycle-counter","full-cycle-counter"]),(0,n._)("div",T,[A,(0,n._)("img",{src:r,class:"digital-tree__counter-default",onClick:l[0]||(l[0]=(...l)=>e.handleDelay&&e.handleDelay(...l))}),(0,n.wy)((0,n._)("input",{id:"counter-speed","onUpdate:modelValue":l[1]||(l[1]=l=>e.timeRange=l),type:"number",placeholder:"Speed",name:"quantity",step:"10",min:"0",max:"6000",class:"counter-text-input"},null,512),[[o.nr,e.timeRange]])]),(0,n._)("div",F,[I,(0,n.wy)((0,n._)("input",{id:"counter-tree","onUpdate:modelValue":l[2]||(l[2]=l=>e.treeCount=l),type:"number",placeholder:"Tree count",name:"quantity",step:"1",min:"0",max:"10",class:"counter-text-input"},null,512),[[o.nr,e.treeCount]])]),(0,n._)("div",k,[j,(0,n.wy)((0,n._)("input",{id:"counter-tree","onUpdate:modelValue":l[3]||(l[3]=l=>e.fieldWidth=l),type:"number",placeholder:"Tree count",name:"quantity",step:"1",min:"1",class:"counter-text-input"},null,512),[[o.nr,e.fieldWidth]])]),(0,n._)("div",E,[D,(0,n.wy)((0,n._)("input",{id:"counter-field-size-raw","onUpdate:modelValue":l[4]||(l[4]=l=>e.fieldHeight=l),type:"number",placeholder:"Tree count",name:"quantity",step:"1",min:"1",class:"counter-text-input"},null,512),[[o.nr,e.fieldHeight]])])]),(0,n._)("div",H,[(0,n.Wm)(S,{"digital-trees":e.digitalTrees,onClicked:e.displayCellParam},null,8,["digital-trees","onClicked"])])])])])}var G=t(4870);const P="#808080",z="field",O="cell",B=16,S=32;class N{constructor(e,l,t){this.i=e,this.j=l,this.id=`i${e}j${l}`,this.indexInTree=null,this.type=z,this.color=P,this.genome=0,this.nextCell=null,this.parentTree=null,this.isCreateAnimation=!0,this.isCellAnimation=!1,this.isCellFalling=!1,this.fieldCells=t}setColor(e){this.color=e}setCellType(){this.type=O,this.isCreateAnimation=!1,this.isCellAnimation=!0}setFieldType(){this.isCreateAnimation=!1,this.isCreateAnimation=!0,this.isCellAnimation=!1,this.type=z,this.color=P,this.indexInTree=null,this.isCellFalling=!1,this.parentTree=null,this.genome=0,this.nextCell=null}generatedEnergyByCell(){const e=2;if(this.isCellFalling)return 0;{const l=0===this.j;if(l)return 3;const t=this.j===this.fieldCells.length-1;if(t)return 0;let o=0;for(let n=1;n<e+1;n++){const l=this.j-n,t=l in this.fieldCells&&this.i in this.fieldCells[l];if(!t)return n=e+1,3;{const t=this.fieldCells[l][this.i]?.type===z;if(!t)return n=e+1,o;o+=1}}return o}}cellFalling(){this.isCellFalling=!0}cellIsNotFalling(){this.isCellFalling=!1}}t(1703);class M{constructor(e,l,t,o=this.gererateGenome(),n=this.generateRandomColor(),i=this.generateRandomColor()){this.digitalTrees=e,this.fieldCells=l,this.logTextArray=t,this.id=this.generateID(),this.cells=[],this.counterCell=0,this.counterCellAll=0,this.lastCell=null,this.isFreeCellsAround=!0,this.headColor=n,this.bodyColor=i,this.positionCurrent=null,this.positionNext=null,this.energy=10,this.genome=o,this.lastIncreaseEnergy=0,this.lastReduceEnergy=0,e.push(this)}generateRandomColor(){let e=P;while(e===P)e="#",e+=Math.floor(16777215*Math.random()).toString(16);return e}generateID(){const e=6;let l="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=t.length;for(let n=0;n<e;n++)l+=t.charAt(Math.floor(Math.random()*o));return l}addFirstCell(){const e=this.randomCellFloor();this.cells.push(e),this.cells[0].setColor(this.headColor),this.cells[0].setCellType(),this.cells[0].parentTree=this,this.cells[0].indexInTree=this.cells.length-1,this.cells[0].genome=0,this.refreshLastCell(),this.createCellLog()}chooseRandomStartCell(){let e,l,t=0;while(t<this.fieldCells.length*this.fieldCells[0].length){if(e=this.getRandomInt(0,this.fieldCells.length),l=this.getRandomInt(0,this.fieldCells[0].length),console.log("In chooseRandomStartCell()"),this.fieldCells[e][l].color===P)return this.fieldCells[e][l];t+=1}}randomCellFloor(){let e,l,t=0;while(t<2*this.fieldCells[0].length){if(e=this.fieldCells.length-1,l=this.getRandomInt(0,this.fieldCells[0].length),console.log("In chooseRandomStartCell()"),this.fieldCells[e][l].type===z)return this.fieldCells[e][l];t+=1}}getRandomInt(e,l){return e=Math.ceil(e),l=Math.floor(l),Math.floor(Math.random()*(l-e))+e}gererateGenome(){const e=new Array(B).fill(0).map((()=>({upGen:this.getRandomInt(0,S),downGen:this.getRandomInt(0,S),leftGen:this.getRandomInt(0,S),rightGen:this.getRandomInt(0,S)})));return console.log("genome",e),e}refreshLastCell(){this.lastCell=this.cells[this.cells.length-1]}createCell(){const e=this.FreeCellsAround2(this.lastCell);if(0===e.length)this.isFreeCellsAround=!1,this.lastCell.isCellFalling=!0,this.counterCell>1&&this.deleteTreeBody();else{const l=this.chooseRandomPoint(e),[t,o]=l;this.addNextCell(t,o)}}FreeCellsAround(e){const l=[];let t=e.i-1,o=e.j-1;const n=e.i+2,i=e.j+2;for(;o<i;o++)for(t=e.i-1;t<n;t++)this.isCoordinateInField(t,o)&&this.fieldCells[o][t].color===P&&l.push([o,t]);return l}FreeCellsAround2(e){const l=[];let t=e.i-1,o=e.j-1;const n=e.i+2,i=e.j+2;for(let s=o;s<i;s++);for(;o<i;o++)for(t=e.i-1;t<n;t++)o in this.fieldCells&&t in this.fieldCells[o]&&this.fieldCells[o][t].type===z&&l.push([o,t]);return l}isCoordinateInField(e,l){return e>=0&&e<this.fieldCells[0].length&&l>=0&&l<this.fieldCells.length}chooseRandomPoint(e){const l=this.getRandomInt(0,e.length);return e[l]}addNextCell(e,l){this.lastCell.setColor(this.bodyColor);const t=this.fieldCells[e][l];if(t.setColor(this.headColor),t.setCellType(),this.counterCellAll=this.counterCellAll+1,this.counterCell=this.counterCell+1,this.counterCellAll<0)throw new Error("no cell counterCellAll");t.indexInTree=this.counterCellAll,t.parentTree=this,this.cells.push(t),this.refreshLastCell(),this.createCellLog()}createCellLog(){const e={i:this.lastCell.i,j:this.lastCell.j,id:this.id,type:"create",headColor:this.headColor,bodyColor:this.bodyColor};this.logTextArray.push(e),this.logTextArray.length>50&&this.logTextArray.shift()}reset(){this.isFreeCellsAround=!0,this.cells=[],this.lastCell=null}changeRandomColor(){this.headColor=this.generateRandomColor(),this.bodyColor=this.generateRandomColor()}deleteEmptyTrees(){const e=this.digitalTrees.findIndex((e=>0===e.cells.length));-1!==e&&this.digitalTrees.splice(e,1)}}var L=t(6685);const W={class:"digital-tree__control-button"};function Z(e,l,t,o,i,r){return(0,n.wg)(),(0,n.iD)("div",W,[!1===t.isGamePaused?((0,n.wg)(),(0,n.iD)("img",{key:0,id:"field-left-control-pause",src:"https://img.icons8.com/external-bearicons-glyph-bearicons/64/000000/external-Pause-essential-collection-bearicons-glyph-bearicons.png",class:"digital-tree__field-left-control-button",style:{height:"48px"},onClick:l[0]||(l[0]=(...e)=>o.pauseGame&&o.pauseGame(...e))})):((0,n.wg)(),(0,n.iD)("img",{key:1,id:"field-left-control-pause",src:"https://img.icons8.com/external-bearicons-glyph-bearicons/64/000000/external-Play-essential-collection-bearicons-glyph-bearicons.png",class:"digital-tree__field-left-control-button",style:{height:"48px"},onClick:l[1]||(l[1]=(...e)=>o.pauseGame&&o.pauseGame(...e))})),(0,n._)("img",{id:"field-left-control-restart",src:"https://img.icons8.com/glyph-neue/64/000000/restart.png",class:"digital-tree__field-left-control-button",style:{height:"56px"},onClick:l[2]||(l[2]=(...e)=>o.restartPage&&o.restartPage(...e))}),(0,n._)("img",{id:"field-left-control-color",src:L,class:"digital-tree__field-left-control-button",style:(0,s.j5)(o.colorButtonStyle),onClick:l[3]||(l[3]=(...e)=>o.stopChangeColor&&o.stopChangeColor(...e))},null,4)])}var Y={name:"ControlButton",props:{isGamePaused:{type:Boolean},isCanChangeColor:{type:Boolean}},setup(e,{emit:l}){const t=(0,G.iH)({});function o(){location.reload()}function n(){l("onPauseGame")}function i(){t.value=!1===e.isCanChangeColor?{height:"40px"}:{filter:"invert(0.6)",height:"40px"},l("onChangeColor")}return{restartPage:o,pauseGame:n,colorButtonStyle:t,stopChangeColor:i}}},q=t(89);const K=(0,q.Z)(Y,[["render",Z]]);var V=K,U=t(5034);const $=e=>((0,n.dD)("data-v-3f5df9cd"),e=e(),(0,n.Cn)(),e),J={class:"digital-tree__header"},Q=$((()=>(0,n._)("div",{class:"digital-tree__header-logo"},[(0,n._)("img",{src:U,style:{height:"32px",opacity:"0.5"},alt:"Vue logo"})],-1))),X=$((()=>(0,n._)("div",{class:"digital-tree__header-text"}," Digital Trees ",-1))),ee=$((()=>(0,n._)("div",null,null,-1))),le=[Q,X,ee];function te(e,l){return(0,n.wg)(),(0,n.iD)("div",J,le)}const oe={},ne=(0,q.Z)(oe,[["render",te],["__scopeId","data-v-3f5df9cd"]]);var ie=ne;const se={class:"block-counter__header"},re={class:"block-counter__header-text",style:{color:"white"}},ae=["onClick"];function ce(e,l,t,o,i,r){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",null,[(0,n._)("div",se,[(0,n._)("p",re," Tree count: "+(0,s.zw)(t.digitalTrees.length),1)])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.digitalTrees,((l,t)=>((0,n.wg)(),(0,n.iD)("div",{key:l.id,class:"cell-counter",onClick:t=>e.$emit("clicked",l.lastCell.i,l.lastCell.j)},[(0,n._)("div",{class:"block-counter-head",style:(0,s.j5)({background:l.headColor})},[(0,n._)("p",{class:"cellText",style:(0,s.j5)({color:l.headColor})},(0,s.zw)(t),5)],4),(0,n._)("div",{class:"block-counter",style:(0,s.j5)({background:l.bodyColor})},[(0,n._)("p",{class:"cellText",style:(0,s.j5)({color:l.bodyColor})}," Energ:"+(0,s.zw)(l.energy)+", +"+(0,s.zw)(l.lastIncreaseEnergy)+" / -"+(0,s.zw)(l.lastReduceEnergy)+" Cells: "+(0,s.zw)(l.cells.length),5)],4)],8,ae)))),128))])}var de={name:"CellCounter",props:{digitalTrees:{type:Array,default:()=>[]}}};const ue=(0,q.Z)(de,[["render",ce],["__scopeId","data-v-0db982a9"]]);var he=ue;const ge={class:"blocks-field"},fe={class:"blocks-field__column-index"},Ce={class:"blocks-field__row-index"};function pe(e,l,t,o,i,r){const a=(0,n.up)("CellBlock");return(0,n.wg)(),(0,n.iD)("div",ge,[(0,n._)("div",fe,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.fieldCells[0],((e,l)=>((0,n.wg)(),(0,n.iD)("div",{key:l},(0,s.zw)(l),1)))),128))]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.fieldCells,((l,o)=>((0,n.wg)(),(0,n.iD)("div",{key:o,class:"testArray"},[(0,n._)("div",Ce,(0,s.zw)(o),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l,(l=>((0,n.wg)(),(0,n.iD)("div",{key:l.id,class:"testArray"},[(0,n.Wm)(a,{"cell-color":l.color,"cell-type":l.type,"cell-parent-tree-id":l?.parentTree?.id,"cell-is-create-animation":l?.isCreateAnimation,"cell-is-cell-animation":l?.isCellAnimation,"choosen-tree-id":t.choosenTreeId,onClick:t=>e.$emit("clicked",l.i,l.j)},null,8,["cell-color","cell-type","cell-parent-tree-id","cell-is-create-animation","cell-is-cell-animation","choosen-tree-id","onClick"])])))),128))])))),128))])}function ye(e,l,t,o,i,r){return(0,n.wg)(),(0,n.iD)("div",{class:(0,s.C_)(o.classOptions),style:(0,s.j5)(o.styleOptions),onClick:l[0]||(l[0]=(...e)=>o.sayHello&&o.sayHello(...e))},["cell"===t.cellType?((0,n.wg)(),(0,n.iD)("p",{key:0,class:(0,s.C_)({cellText:!0}),style:(0,s.j5)({color:t.cellColor})},null,4)):(0,n.kq)("",!0)],6)}var ve={name:"CellObject",props:{cellColor:{type:String,default:"#000000"},cellType:{type:String,default:""},cellParentTreeId:{type:String,default:""},cellIsCreateAnimation:{type:Boolean,default:!1},cellIsCellAnimation:{type:Boolean,default:!1},choosenTreeId:{type:String,default:"none"}},setup(e){const l=(0,G.iH)("false"),t=(0,G.iH)("false"),o=(0,n.Fl)((()=>e.cellParentTreeId===e.choosenTreeId)),i=(0,n.Fl)((()=>({block:!0,create_block_animation:e.cellIsCreateAnimation,change_size_animation:e.cellIsCellAnimation,"block--choosed":o.value}))),s=(0,n.Fl)((()=>({background:e.cellColor})));function r(){}return l.value=(0,n.Fl)((()=>"field"===e.cellType)),t.value=(0,n.Fl)((()=>"cell"===e.cellType)),{isCell:t,isField:l,classOptions:i,styleOptions:s,sayHello:r}}};const _e=(0,q.Z)(ve,[["render",ye],["__scopeId","data-v-6bf33510"]]);var me=_e,we={name:"CellsField",components:{CellBlock:me},props:{fieldCells:{type:Array,default:()=>[]},choosenTreeId:{type:String,default:"none"}}};const xe=(0,q.Z)(we,[["render",pe],["__scopeId","data-v-5250f090"]]);var be=xe;const Te=e=>((0,n.dD)("data-v-21f67f74"),e=e(),(0,n.Cn)(),e),Ae={class:"digital-tree__counter_cycle"},Fe=Te((()=>(0,n._)("div",{class:"digital-tree__counter-title"}," All cycle ",-1))),Ie={id:"counter-count",class:"digital-tree__counter-count"},ke=Te((()=>(0,n._)("div",{class:"digital-tree__counter-title"}," Full cycle ",-1))),je={id:"counter-fullCircle-count",class:"digital-tree__counter-count"};function Ee(e,l,t,o,i,r){return(0,n.wg)(),(0,n.iD)("div",Ae,[(0,n._)("div",null,[Fe,(0,n._)("div",Ie,(0,s.zw)(t.cycleCounter),1)]),(0,n._)("div",null,[ke,(0,n._)("div",je,(0,s.zw)(t.fullCycleCounter),1)])])}var De={name:"CycleCounter",props:{cycleCounter:{type:Number},fullCycleCounter:{type:Number}}};const He=(0,q.Z)(De,[["render",Ee],["__scopeId","data-v-21f67f74"]]);var Re=He;const Ge={class:"digital-tree__log-box"},Pe=(0,n.uE)('<div class="digital-tree__logbox-title digital-tree__log-box-border" style="border-style:solid;" data-v-171449da><div class="digital-tree__field-left-logbox-text" style="border:none;" data-v-171449da><div class="digital-tree__field-left-logbox-td" style="width:56px;margin-left:0px;" data-v-171449da> Action </div><div class="digital-tree__field-left-logbox-td" style="width:48px;" data-v-171449da> Tree </div><div class="digital-tree__field-left-logbox-td" style="width:48px;" data-v-171449da> Raw </div><div class="digital-tree__field-left-logbox-td" style="width:48px;" data-v-171449da> Col. </div></div></div>',1),ze={id:"logbox",class:"digital-tree__field-left-logbox"};function Oe(e,l,t,o,i,r){return(0,n.wg)(),(0,n.iD)("div",Ge,[Pe,(0,n._)("div",ze,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.logBoxArray.slice().reverse(),((e,l)=>((0,n.wg)(),(0,n.iD)("div",{key:l,class:"digital-tree__field-left-logbox-text digital-tree__log-box-border"},[(0,n._)("tr",null,[(0,n._)("td",{class:"digital-tree__field-left-logbox-td",style:(0,s.j5)({color:e.bodyColor,width:"64px"})}," Create ",4),(0,n._)("td",{class:"digital-tree__field-left-logbox-td",style:(0,s.j5)({color:e.bodyColor,width:"48px"})},(0,s.zw)(e.id),5),(0,n._)("td",{class:"digital-tree__field-left-logbox-td",style:(0,s.j5)({color:e.bodyColor,width:"48px"})},(0,s.zw)(e.i),5),(0,n._)("td",{class:"digital-tree__field-left-logbox-td",style:(0,s.j5)({color:e.bodyColor,width:"48px"})},(0,s.zw)(e.j),5)])])))),128))])])}var Be={name:"LogBox",props:{logBoxArray:{type:Array,default:()=>[],scrollToBottom(){console.log("Hello")}}}};const Se=(0,q.Z)(Be,[["render",Oe],["__scopeId","data-v-171449da"]]);var Ne=Se;const Me=()=>{function e(e,t){e.lastCell.isCellFalling?o(e,t):l(e,t),r(e)}function l(e,l){if(console.log("realiseGenome"),!l)throw console.log("tree :>> ",e),new Error("fieldCells should be defined");e.cells.forEach((o=>{if(o.color===e.headColor){const i=e.genome[o.genome];let s=null,r=null;i.upGen<=15&&(s=o.i,r=o.j-1,t(s,r,l)&&n(o,s,r,i.upGen,e)),i.downGen<=15&&(s=o.i,r=o.j+1,t(s,r,l)&&n(o,s,r,i.downGen,e)),i.leftGen<=15&&(s=o.i-1,r=o.j,t(s,r,l)&&n(o,s,r,i.leftGen,e)),i.rightGen<=15&&(s=o.i+1,r=o.j,t(s,r,l)&&(console.log("create genome"),n(o,s,r,i.rightGen,e)))}}))}function t(e,l,t){try{return l in t&&e in t[l]&&t[l][e]?.color===P}catch(o){throw console.error("error :>> ",o),console.log("fieldCells :>> ",t),new Error("Something went badly wrong!")}}function o(e,t){if(console.log("moveCellDown"),e.lastCell.j===e.fieldCells.length-1)e.lastCell.isCellFalling=!1,e.lastCell.isFreeCellsAround=!0,l(e,t);else{e.positionCurrent=e.lastCell,e.positionNext=e.fieldCells[e.positionCurrent.j+1][e.positionCurrent.i];const l=e.positionNext.type===z;if(l){const l=["type","color","parentTree","isCellFalling","indexInTree"];l.forEach((l=>{e.positionNext[l]=e.positionCurrent[l]})),e.lastCell=e.positionNext,e.cells[0]=e.positionNext,e.positionCurrent.setFieldType()}}}function n(e,l,t,o,n){e.setColor(n.bodyColor);const r=n.fieldCells[t][l];r.setColor(n.headColor),r.setCellType(),n.counterCellAll=n.counterCellAll+1,n.counterCell=n.counterCell+1,r.indexInTree=n.counterCellAll,r.genome=o,r.parentTree=n,n.cells.push(r),i(n),s(n)}function i(e){e.lastCell=e.cells[e.cells.length-1]}function s(e){const l={i:e.lastCell.i,j:e.lastCell.j,id:e.id,type:"create",headColor:e.headColor,bodyColor:e.bodyColor};e.logTextArray.push(l),e.logTextArray.length>50&&e.logTextArray.shift()}function r(e){console.log("refreshEnergy"),a(e),c(e),d(e)}function a(e){console.log("increaseEnergy");let l=0;e.cells.forEach((e=>{console.log("cell :>> ",e),l+=e.generatedEnergyByCell()})),e.lastIncreaseEnergy=l,e.energy=e.energy+l}function c(e){console.log("reduceEnergy"),e.lastReduceEnergy=e.cells.length,e.energy=e.energy-e.cells.length}function d(e){console.log("checkIsEnergyOver");const l=e.energy<0;l&&(e.cells.length<=1?(console.log("1 cell"),u(e),h(e)):(console.log("more then 1 cell"),g(e),f(e),e.cells=[]),e.deleteEmptyTrees())}function u(e){e.cells.forEach((e=>e.setFieldType))}function h(e){e.cells=[],e.lastCell={}}function g(e){e.cells.forEach((l=>{l.color===e.bodyColor&&l.setFieldType()})),e.cells=e.cells.filter((l=>l.color===e.headColor)),e.cells.forEach((e=>e.cellFalling())),e.counterCell=1}function f(e){e.cells.forEach((l=>{const t=new M(e.digitalTrees,e.fieldCells,e.logTextArray,e.genome,e.headColor,e.bodyColor);C(l,t),p(t)}))}function C(e,l){l.cells.push(e),l.counterCell=1,l.counterCellAll=1,l.refreshLastCell(),l.lastCell.color=l.headColor,l.lastCell.genome=0,l.cells[0].parentTree=l,l.lastCell.parentTree=l,console.log("cell :>> ",e.parentTree.id),console.log("newTree :>> ",l.id)}function p(e){e.getRandomInt(0,B)}return{chooseAction:e,allCellToField:u,deleteAllCells:h}};var Le=Me;const We=()=>{function e(e,l,t){throw console.log("trees :>> ",l),console.log("tree :>> ",t),new Error(e)}function l(l,t,o){let n=!1;l.cells.forEach((i=>{i.j!==t-1&&!0!==i.isCellFalling||(n=!0),n||e("no cell on bottom",o,l)}))}function t(l,t){l.cells.forEach((o=>{o.parentTree.id!==l.id&&(console.log("tree.id :>> ",l.id),console.log("cell.parentTree.id :>> ",o.parentTree.id),e("cell.parentTree !== tree.id",t,l))}))}function o(e,l){e.cells.forEach((t=>{const o=t instanceof N;if(!o)throw console.log("isInstance :>> ",o),new Error("Cell have wrong class",l,e)}))}function n(e,l){const t=e instanceof M;if(!t)throw console.log("isInstance :>> ",t),new Error("Tree have wrong class",l,e)}return{isAnyCellAtBottom:l,isCellsParentRight:t,isInstanceOfCells:o,isInstanceOfTree:n}};var Ze=We;const Ye={name:"fieldBox",components:{ControlButton:V,CellHeader:ie,CellCounter:he,CellsField:be,CycleCounter:Re,LogBox:Ne},setup(){const{chooseAction:e,allCellToField:l,deleteAllCells:t}=Le(),{isAnyCellAtBottom:o,isCellsParentRight:i,isInstanceOfCells:s,isInstanceOfTree:r}=Ze(),a=(0,G.iH)([]),c=(0,G.iH)(30),d=(0,G.iH)(10),u=(0,G.iH)([]),h=(0,G.iH)(5),g=(0,G.iH)(new Array(d.value).fill(0).map((()=>new Array(c.value)))),f=(0,G.iH)(300),C=(0,G.iH)(0),p=(0,G.iH)(0),y=(0,G.iH)(!1),v=(0,G.iH)(!1),_=(0,G.iH)(!1),m=(0,G.iH)(!0),w=(0,G.iH)({}),x=(0,n.Fl)((()=>!0)),b=(0,n.Fl)((()=>u.value.length<1?u.value:u.value.sort(((e,l)=>e.cells.length-l.cells.length))));function T(){for(let e=0;e<g.value.length;e++)for(let l=0;l<g.value[e].length;l++)g.value[e][l]=new N(l,e,g.value)}function A(){for(let e=0;e<h.value;e++)new M(u.value,g.value,a.value)}function F(){console.log("In config"),I()}function I(){for(const e of u.value)e.addFirstCell()}async function k(){while(!1===y.value)!1===v.value&&await j(),!1===v.value?z():await E(200)}async function j(){while(x.value){if(console.time("startCycle"),await E(f.value),D(),R(),C.value+=1,v.value)return void(_.value=!0);console.timeEnd("startCycle")}p.value+=1,P()}function E(e){return new Promise((l=>{setTimeout(l,e)}))}function D(){for(const l of u.value)e(l,g.value),H(l)}function H(e){o(e,g.value.length,u.value),s(e,u.value),r(e,u.value),i(e,u.value)}function R(){let e=0;u.value.forEach(((o,n)=>{(0===o.cells.length||o.energy<0)&&(e+=1,l(o),t(o),u.value.splice(n,1))})),g.value.forEach((e=>e.forEach((e=>{null!==e?.parentTree&&e?.parentTree.energy<0&&e.setFieldType()}))))}function P(){a.value.push("========= New cycle =========")}function z(){O(),console.log("CleanField");for(const e of u.value)e.reset();m.value&&B(),F(),console.log("config")}function O(){for(const e of g.value)for(const l of e)l.setFieldType()}function B(){for(const e of u.value)e.changeRandomColor()}function S(){v.value=!v.value,!1===v.value&&(_.value=!1)}function L(){m.value=!0!==m.value}async function W(){while(!0===_.value)await E(200);console.log("Added tree"),new M(u.value,g.value,a.value),u.value[u.value.length-1].addFirstCell(),await S()}async function Z(){while(!0===_.value)await E(200);for(const e of u.value[u.value.length-1].cells)e.setFieldType(),await E(100);u.value.pop(),await S()}function Y(){for(let e=0;e<g.value.length;e++)g.value[e].push(new N(g.value[e].length,e,g.value))}function q(){for(let e=0;e<g.value.length;e++)g.value[e].pop()}function K(){g.value.push([]);for(let e=0;e<g.value[0].length;e++)g.value[g.value.length-1].push(new N(e,g.value.length-1,g.value))}function V(){g.value.pop()}function U(e,l){console.log("display cell",e,l),console.log("display cell",e," ",l,g.value[l][e]),w.value=g.value[l][e]}function $(){f.value=0}return(0,n.YP)((()=>h.value),(async(e,l)=>{v.value=!0,e>l?await W():await Z()})),(0,n.YP)((()=>c.value),((e,l)=>{e>l?Y():q()})),(0,n.YP)((()=>d.value),((e,l)=>{e>l?K():V()})),console.log("Hi here is start"),T(),A(),(0,n.bv)((()=>{console.log("Hi Mounted"),F(),console.log("config before start finished"),k()})),{treeCount:h,timeRange:f,fieldWidth:c,fieldCells:g,fieldHeight:d,displayCell:w,logTextArray:a,cycleCounter:C,digitalTrees:u,isGamePaused:v,isCanChangeColor:m,fullCycleCounter:p,sortedDigitalTrees:b,pauseGame:S,handleDelay:$,ChangeColor:L,displayCellParam:U}}};var qe=Ye;const Ke=(0,q.Z)(qe,[["render",R]]);var Ve=Ke,Ue={name:"App",components:{fieldBox:Ve},methods:{}};const $e=(0,q.Z)(Ue,[["render",i]]);var Je=$e;(0,o.ri)(Je).mount("#app")},5860:function(e,l,t){e.exports=t.p+"img/close.62e2fd71.svg"},6685:function(e,l,t){e.exports=t.p+"img/paint-palette-svgrepo-com.4513dec8.svg"},5034:function(e,l,t){e.exports=t.p+"img/vuejs-logo.0322120f.svg"}},l={};function t(o){var n=l[o];if(void 0!==n)return n.exports;var i=l[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(l,o,n,i){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],i=e[d][2];for(var r=!0,a=0;a<o.length;a++)(!1&i||s>=i)&&Object.keys(t.O).every((function(e){return t.O[e](o[a])}))?o.splice(a--,1):(r=!1,i<s&&(s=i));if(r){e.splice(d--,1);var c=n();void 0!==c&&(l=c)}}return l}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,n,i]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var o in l)t.o(l,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.p="/digital-trees-vue/"}(),function(){var e={143:0};t.O.j=function(l){return 0===e[l]};var l=function(l,o){var n,i,s=o[0],r=o[1],a=o[2],c=0;if(s.some((function(l){return 0!==e[l]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(a)var d=a(t)}for(l&&l(o);c<s.length;c++)i=s[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},o=self["webpackChunkdigital_trees_vue"]=self["webpackChunkdigital_trees_vue"]||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(4775)}));o=t.O(o)})();
//# sourceMappingURL=app.d09571fb.js.map